(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[379],{801:(e,t,r)=>{"use strict";r.d(t,{q:()=>s});var a=r(694),o=r(404);let n=(0,a.cw)({baseUrl:"http://localhost:8000/api",prepareHeaders:e=>{let t=localStorage.getItem("token");return t&&e.set("Authorization","Bearer ".concat(t)),e}}),s=(0,o.xP)({baseQuery:n,endpoints:()=>({})})},2514:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),o=r(2115),n=r(2818),s=r(9552),d=r(4752),l=r.n(d);function i(){let[e,t]=(0,o.useState)([]),[r,d]=(0,o.useState)(!1),[i,u]=(0,o.useState)(""),[c,m]=(0,o.useState)(null),[g,y]=(0,o.useState)("add"),[h,x]=(0,o.useState)(null),b=(0,o.useRef)(null),{data:p,isLoading:f,error:v,refetch:C}=(0,s.Wm)(),[w,{isLoading:j}]=(0,s.uc)(),[N,{isLoading:q}]=(0,s.ez)(),[E,{isLoading:S}]=(0,s.ec)();(0,o.useEffect)(()=>{p&&p.catgories&&t([...p.catgories].sort((e,t)=>e.categoryName.localeCompare(t.categoryName)))},[p]),(0,o.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&x(null)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let P=e=>{y("update"),u(e.categoryName),m(e),d(!0),x(null)},T=e=>{l().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&E(e).unwrap().then(()=>{l().fire("Deleted!","Your category has been deleted.","success"),C()}).catch(e=>{l().fire("Error!","There was an error deleting the category.","error"),console.error("Error deleting category:",e)})}),x(null)},k=async()=>{if(i.trim())try{"add"===g?await w({newCategory:{categoryName:i}}).unwrap():await N({id:c._id,updatedCategory:{categoryName:i}}).unwrap(),d(!1),C()}catch(e){(0,n.A)((null==e?void 0:e.message)||"error occured","warn"),console.error("Error saving category:",v)}},O=e=>{x(h===e?null:e)};return f?(0,a.jsx)("div",{className:"p-6",children:"Loading categories..."}):v?(0,a.jsxs)("div",{className:"p-6 text-red-500",children:["Error loading categories: ",v.message]}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold",children:["Categories (",e.length,")"]}),(0,a.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center",onClick:()=>{y("add"),u(""),m(null),d(!0)},children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Category"]})]}),0===e.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No categories found"}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e&&e.length>0&&e.map((e,t)=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg shadow-sm bg-white",children:(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-4 text-gray-500",children:t+1}),(0,a.jsx)("span",{className:"ml-4 text-lg font-medium",children:e.categoryName})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:()=>O(e._id),children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),h===e._id&&(0,a.jsx)("div",{ref:b,className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>P(e),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:"Update"})}),(0,a.jsx)("li",{children:(0,a.jsx)("button",{onClick:()=>T(e._id),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 hover:text-red-700",children:"Delete"})})]})})]})]})},e._id))}),r&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold",children:"add"===g?"Add New Category":"Update Category"}),(0,a.jsx)("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"categoryName",children:"Category Name"}),(0,a.jsx)("input",{id:"categoryName",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter category name",value:i,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end",children:[(0,a.jsx)("button",{type:"button",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2",onClick:()=>d(!1),children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:k,disabled:j||q,children:j||q?"Saving...":"add"===g?"Add Category":"Update Category"})]})]})})]})}function u(){return(0,a.jsx)(i,{})}},2596:(e,t,r)=>{"use strict";function a(){for(var e,t,r=0,a="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=function e(t){var r,a,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(a=e(t[r]))&&(o&&(o+=" "),o+=a)}else for(a in t)t[a]&&(o&&(o+=" "),o+=a);return o}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{$:()=>a,A:()=>o});let o=a},2818:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(8543);let o=(e,t)=>{let r="toast-".concat(e,"-").concat(t);a.oR.isActive(r)||a.oR[t](e,{toastId:r,position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}},7144:(e,t,r)=>{Promise.resolve().then(r.bind(r,2514))},9552:(e,t,r)=>{"use strict";r.d(t,{$R:()=>f,$w:()=>g,Dx:()=>a,Gw:()=>j,Lf:()=>c,Lh:()=>h,Ql:()=>x,RD:()=>u,Ud:()=>m,WA:()=>b,Wm:()=>d,ec:()=>s,ez:()=>n,gr:()=>v,ql:()=>N,uc:()=>o,wE:()=>w,wT:()=>C});let{useSigninMutation:a,useAddCategoryMutation:o,useUpdateCategoryMutation:n,useDeleteCategoryMutation:s,useGetCategoriesQuery:d,useSendOtpMutation:l,useVerifyOtpMutation:i,useUpdateUserStatusMutation:u,useUpdateUserRoleMutation:c,useGetDashboardQuery:m,useGetProfileQuery:g,useUploadImageMutation:y,useCreateWribateMutation:h,useDeleteWribateMutation:x,useGetMyWribatesByCategoryQuery:b,useGetMyWribateByIdQuery:p,useCreateBatchWribateMutation:f,useGetUsersQuery:v,useAddCountryMutation:C,useUpdateCountryMutation:w,useDeleteCountryMutation:j,useGetCountriesQuery:N,useGetHtmlContentQuery:q,useUpdateHtmlContentMutation:E}=r(801).q.injectEndpoints({endpoints:e=>({getCategories:e.query({query:()=>"/admin/getCategories"}),getDashboard:e.query({query:function(){let{startDate:e,endDate:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t);let a=r.toString();return"/admin/dashboard".concat(a?"?".concat(a):"")}}),addCategory:e.mutation({query:e=>{let{newCategory:t}=e;return{url:"/admin/addCategory",method:"POST",body:t}}}),updateCategory:e.mutation({query:e=>{let{id:t,updatedCategory:r}=e;return{url:"/admin/updateCategories/".concat(t),method:"PATCH",body:r}}}),deleteCategory:e.mutation({query:e=>({url:"/admin/deleteCategories/".concat(e),method:"DELETE"})}),getProfile:e.query({query:()=>"/user/getProfile"}),getUsers:e.query({query:()=>"/admin/getUsers"}),updateUserRole:e.mutation({query:e=>({url:"/admin/updateUserRole",method:"POST",body:e})}),updateUserStatus:e.mutation({query:e=>{let{id:t,updatedStatus:r}=e;return{url:"/admin/updateUserStatus/".concat(t),method:"PATCH",body:r}}}),getMyWribatesByCategory:e.query({query:e=>"/admin/writesByCategory/".concat(e)}),getMyWribateById:e.query({query:e=>"/admin/getWribateById/".concat(e)}),signin:e.mutation({query:e=>({url:"/admin/signin",method:"POST",body:e})}),sendOtp:e.mutation({query:e=>({url:"/user/sendOTP",method:"POST",body:e})}),verifyOtp:e.mutation({query:e=>({url:"/user/vertfyOTP",method:"POST",body:e})}),uploadImage:e.mutation({query:e=>{let{type:t,data:r}=e;return{url:"/user/uploadImage?image_type=".concat(t),method:"POST",body:r,headers:{}}}}),createWribate:e.mutation({query:e=>({url:"/user/createWribate",method:"POST",body:e})}),deleteWribate:e.mutation({query:e=>({url:"/admin/deleteWribate/".concat(e),method:"DELETE"})}),createBatchWribate:e.mutation({query:e=>{for(let t of(console.log("FormData entries:"),e.entries()))console.log(t[0]+", "+t[1]);return{url:"/user/createBatchWribate",method:"POST",body:e,headers:{}}}}),addCountry:e.mutation({query:e=>{let{newCountry:t}=e;return{url:"/admin/addCountry",method:"POST",body:t}}}),getCountries:e.query({query:()=>"/admin/getCountries"}),updateCountry:e.mutation({query:e=>{let{id:t,updatedCountry:r}=e;return{url:"/admin/updateCountries/".concat(t),method:"PATCH",body:r}}}),deleteCountry:e.mutation({query:e=>({url:"/admin/deleteCountries/".concat(e),method:"DELETE"})}),getHtmlContent:e.query({query:e=>{let{type:t,name:r}=e;return"/admin/getHtmlContent/".concat(t,"/").concat(r)}}),updateHtmlContent:e.mutation({query:e=>{let{id:t,data:r}=e;return{url:"/admin/updateHtmlContent/".concat(t),method:"POST",body:r}}})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[320,540,710,404,543,441,684,358],()=>t(7144)),_N_E=e.O()}]);