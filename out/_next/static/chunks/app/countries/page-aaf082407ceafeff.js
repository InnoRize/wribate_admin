(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{801:(e,t,r)=>{"use strict";r.d(t,{q:()=>s});var n=r(694),a=r(404);let o=(0,n.cw)({baseUrl:"http://localhost:8000/api",prepareHeaders:e=>{let t=localStorage.getItem("token");return t&&e.set("Authorization","Bearer ".concat(t)),e}}),s=(0,a.xP)({baseQuery:o,endpoints:()=>({})})},2596:(e,t,r)=>{"use strict";function n(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}(e))&&(n&&(n+=" "),n+=t);return n}r.d(t,{$:()=>n,A:()=>a});let a=n},2818:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(8543);let a=(e,t)=>{let r="toast-".concat(e,"-").concat(t);n.oR.isActive(r)||n.oR[t](e,{toastId:r,position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}},4963:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(5155),a=r(2115),o=r(2818),s=r(9552),d=r(4752),l=r.n(d);function i(){let[e,t]=(0,a.useState)([]),[r,d]=(0,a.useState)(!1),[i,u]=(0,a.useState)(""),[c,m]=(0,a.useState)(null),[y,h]=(0,a.useState)("add"),[g,x]=(0,a.useState)(null),b=(0,a.useRef)(null),{data:p,isLoading:f,error:v,refetch:C}=(0,s.ql)(),[w,{isLoading:j}]=(0,s.wT)(),[N,{isLoading:q}]=(0,s.wE)(),[E,{isLoading:S}]=(0,s.Gw)();(0,a.useEffect)(()=>{p&&p.countries&&t([...p.countries].sort((e,t)=>e.countryName.localeCompare(t.countryName)))},[p]),(0,a.useEffect)(()=>{function e(e){b.current&&!b.current.contains(e.target)&&x(null)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let T=e=>{h("update"),u(e.countryName),m(e),d(!0),x(null)},P=e=>{l().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&E(e).unwrap().then(()=>{l().fire("Deleted!","Your country has been deleted.","success"),C()}).catch(e=>{l().fire("Error!","There was an error deleting the country.","error"),console.error("Error deleting country:",e)})}),x(null)},k=async()=>{if(i.trim())try{"add"===y?await w({newCountry:{countryName:i}}).unwrap():await N({id:c._id,updatedCountry:{countryName:i}}).unwrap(),d(!1),C()}catch(e){(0,o.A)((null==e?void 0:e.message)||"error occured","warn"),console.error("Error saving country:",v)}},O=e=>{x(g===e?null:e)};return f?(0,n.jsx)("div",{className:"p-6",children:"Loading countries..."}):v?(0,n.jsxs)("div",{className:"p-6 text-red-500",children:["Error loading countries: ",v.message]}):(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold",children:["Countries (",e.length,")"]}),(0,n.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center",onClick:()=>{h("add"),u(""),m(null),d(!0)},children:[(0,n.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Country"]})]}),0===e.length?(0,n.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No countries found"}):(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:e&&e.length>0&&e.map((e,t)=>(0,n.jsx)("div",{className:"border border-gray-200 rounded-lg shadow-sm bg-white",children:(0,n.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"mr-4 text-gray-500",children:t+1}),(0,n.jsx)("span",{className:"ml-4 text-lg font-medium",children:e.countryName})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:()=>O(e._id),children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})}),g===e._id&&(0,n.jsx)("div",{ref:b,className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>T(e),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:"Update"})}),(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:()=>P(e._id),className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 hover:text-red-700",children:"Delete"})})]})})]})]})},e._id))}),r&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h3",{className:"text-xl font-bold",children:"add"===y?"Add New Country":"Update Country"}),(0,n.jsx)("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:(0,n.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"countryName",children:"Country Name"}),(0,n.jsx)("input",{id:"countryName",type:"text",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",placeholder:"Enter country name",value:i,onChange:e=>u(e.target.value)})]}),(0,n.jsxs)("div",{className:"flex justify-end",children:[(0,n.jsx)("button",{type:"button",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2",onClick:()=>d(!1),children:"Cancel"}),(0,n.jsx)("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:k,disabled:j||q,children:j||q?"Saving...":"add"===y?"Add Country":"Update Country"})]})]})})]})}function u(){return(0,n.jsx)(i,{})}},7696:(e,t,r)=>{Promise.resolve().then(r.bind(r,4963))},9552:(e,t,r)=>{"use strict";r.d(t,{$R:()=>f,$w:()=>y,Dx:()=>n,Gw:()=>j,Lf:()=>c,Lh:()=>g,Ql:()=>x,RD:()=>u,Ud:()=>m,WA:()=>b,Wm:()=>d,ec:()=>s,ez:()=>o,gr:()=>v,ql:()=>N,uc:()=>a,wE:()=>w,wT:()=>C});let{useSigninMutation:n,useAddCategoryMutation:a,useUpdateCategoryMutation:o,useDeleteCategoryMutation:s,useGetCategoriesQuery:d,useSendOtpMutation:l,useVerifyOtpMutation:i,useUpdateUserStatusMutation:u,useUpdateUserRoleMutation:c,useGetDashboardQuery:m,useGetProfileQuery:y,useUploadImageMutation:h,useCreateWribateMutation:g,useDeleteWribateMutation:x,useGetMyWribatesByCategoryQuery:b,useGetMyWribateByIdQuery:p,useCreateBatchWribateMutation:f,useGetUsersQuery:v,useAddCountryMutation:C,useUpdateCountryMutation:w,useDeleteCountryMutation:j,useGetCountriesQuery:N,useGetHtmlContentQuery:q,useUpdateHtmlContentMutation:E}=r(801).q.injectEndpoints({endpoints:e=>({getCategories:e.query({query:()=>"/admin/getCategories"}),getDashboard:e.query({query:function(){let{startDate:e,endDate:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=new URLSearchParams;e&&r.append("startDate",e),t&&r.append("endDate",t);let n=r.toString();return"/admin/dashboard".concat(n?"?".concat(n):"")}}),addCategory:e.mutation({query:e=>{let{newCategory:t}=e;return{url:"/admin/addCategory",method:"POST",body:t}}}),updateCategory:e.mutation({query:e=>{let{id:t,updatedCategory:r}=e;return{url:"/admin/updateCategories/".concat(t),method:"PATCH",body:r}}}),deleteCategory:e.mutation({query:e=>({url:"/admin/deleteCategories/".concat(e),method:"DELETE"})}),getProfile:e.query({query:()=>"/user/getProfile"}),getUsers:e.query({query:()=>"/admin/getUsers"}),updateUserRole:e.mutation({query:e=>({url:"/admin/updateUserRole",method:"POST",body:e})}),updateUserStatus:e.mutation({query:e=>{let{id:t,updatedStatus:r}=e;return{url:"/admin/updateUserStatus/".concat(t),method:"PATCH",body:r}}}),getMyWribatesByCategory:e.query({query:e=>"/admin/writesByCategory/".concat(e)}),getMyWribateById:e.query({query:e=>"/admin/getWribateById/".concat(e)}),signin:e.mutation({query:e=>({url:"/admin/signin",method:"POST",body:e})}),sendOtp:e.mutation({query:e=>({url:"/user/sendOTP",method:"POST",body:e})}),verifyOtp:e.mutation({query:e=>({url:"/user/vertfyOTP",method:"POST",body:e})}),uploadImage:e.mutation({query:e=>{let{type:t,data:r}=e;return{url:"/user/uploadImage?image_type=".concat(t),method:"POST",body:r,headers:{}}}}),createWribate:e.mutation({query:e=>({url:"/user/createWribate",method:"POST",body:e})}),deleteWribate:e.mutation({query:e=>({url:"/admin/deleteWribate/".concat(e),method:"DELETE"})}),createBatchWribate:e.mutation({query:e=>{for(let t of(console.log("FormData entries:"),e.entries()))console.log(t[0]+", "+t[1]);return{url:"/user/createBatchWribate",method:"POST",body:e,headers:{}}}}),addCountry:e.mutation({query:e=>{let{newCountry:t}=e;return{url:"/admin/addCountry",method:"POST",body:t}}}),getCountries:e.query({query:()=>"/admin/getCountries"}),updateCountry:e.mutation({query:e=>{let{id:t,updatedCountry:r}=e;return{url:"/admin/updateCountries/".concat(t),method:"PATCH",body:r}}}),deleteCountry:e.mutation({query:e=>({url:"/admin/deleteCountries/".concat(e),method:"DELETE"})}),getHtmlContent:e.query({query:e=>{let{type:t,name:r}=e;return"/admin/getHtmlContent/".concat(t,"/").concat(r)}}),updateHtmlContent:e.mutation({query:e=>{let{id:t,data:r}=e;return{url:"/admin/updateHtmlContent/".concat(t),method:"POST",body:r}}})})})}},e=>{var t=t=>e(e.s=t);e.O(0,[320,540,710,404,543,441,684,358],()=>t(7696)),_N_E=e.O()}]);